# PLAYBOOK ‚Äî WA Event AI (–ö–∞—Ç–∞–ª–æ–≥ –ø–ª–æ—â–∞–¥–æ–∫ –∏ –ø–µ–≤—Ü–æ–≤)

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –¥–∞–Ω–Ω—ã–µ, —à–æ—Ä—Ç–ª–∏—Å—Ç—ã, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –¥–µ–ø–ª–æ–π –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞.

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. –û–±–∑–æ—Ä
2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∞–Ω–Ω—ã–µ
3. –ö–∞—Ç–∞–ª–æ–≥ –ø–µ–≤—Ü–æ–≤ (–Ω–æ–≤–æ–µ)
4. –ú–µ—Ö–∞–Ω–∏–∑–º —à–æ—Ä—Ç–ª–∏—Å—Ç–æ–≤ (–ø–æ–¥—Ä–æ–±–Ω–æ)
5. –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Firestore/Storage)
6. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ–¥–∏–∞
7. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¥–µ–ø–ª–æ–π
8. UI: —Ñ–∏–ª—å—Ç—Ä—ã, –∫–∞—Ä—Ç–æ—á–∫–∏, –≥–∞–ª–µ—Ä–µ—è
9. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —á–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
10. –ß–µ–∫‚Äë–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

---

## 1) –û–±–∑–æ—Ä

–í–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–π—Ç –Ω–∞ Firebase Hosting) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞—Ç–∞–ª–æ–≥–∏:
- **–ü–ª–æ—â–∞–¥–æ–∫** –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `venues`
- **–ü–µ–≤—Ü–æ–≤** –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `singers`

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã, –º–µ–¥–∏–∞‚Äë–≥–∞–ª–µ—Ä–µ—é –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö **—à–æ—Ä—Ç–ª–∏—Å—Ç–æ–≤** ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø–æ–¥–±–æ—Ä–æ–∫, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ —Å—Å—ã–ª–∫–µ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–æ–∫–µ–Ω–∞.

**–°—Ç–µ–∫**: Vanilla JS (ES Modules) ‚Ä¢ Firebase JS SDK v10 ‚Ä¢ Firebase Auth (Anonymous) ‚Ä¢ Firestore ‚Ä¢ Storage ‚Ä¢ Hosting ‚Ä¢ (–æ–ø—Ü.) GitHub Actions.

---

## 2) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∞–Ω–Ω—ã–µ

### –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (index.html)
```html
<script>
  window.__FIREBASE_CONFIG__ = { /* apiKey, authDomain, projectId, storageBucket, ... */ };
  window.__FIREBASE_COLLECTIONS__ = { 
    venues: "venues", 
    shortlists: "shortlists",
    singers: "singers",
    singer_shortlists: "singer_shortlists"
  };
</script>
```

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–≤
URL-–ø–∞—Ä–∞–º–µ—Ç—Ä `catalog` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π –∫–∞—Ç–∞–ª–æ–≥:
- `/?catalog=venues` ‚Äî –ø–ª–æ—â–∞–¥–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `/?catalog=singers` ‚Äî –ø–µ–≤—Ü—ã

–¢–∞–±—ã –≤ UI –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏.

### –ö–æ–ª–ª–µ–∫—Ü–∏—è `venues` (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä)
```json
{
  "name": "Caspian Grand Ballroom",
  "city": "Baku",
  "district": "Narimanov",
  "capacity_min": 150,
  "capacity_max": 900,
  "price_min": 5,
  "price_max": 40,
  "currency": "AZN",
  "location_url": "https://maps.google.com/?q=40.391,49.854",
  "location_lat": 40.391,
  "location_lng": 49.854,
  "media": { "photos": ["https://.../cover.jpg", "https://.../img2.jpg"] },
  "tags": ["banquet","outdoor"]
}
```

–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏: `name`, `city`, `district`, `capacity_min|max`, `price_min|max`, `currency`, `location_url` **–∏–ª–∏** `location_lat/lng`, `media.photos[0]`.

### –ö–æ–ª–ª–µ–∫—Ü–∏—è `singers` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
```json
{
  "slug": "amelia-stone",
  "name": "Amelia Stone",
  "aliases": ["Amy Stone"],
  "gender": "female",
  "phones": ["+994551112233"],
  "genres": ["pop", "ballad"],
  "tags": ["wedding", "cover"],
  "languages": ["en", "ru", "az"],
  "city": "Baku",
  "regions_covered": ["Baku", "Sumqayit"],
  "contact_public": {
    "instagram": "https://instagram.com/ameliastone",
    "youtube": "https://youtube.com/@ameliastone"
  },
  "status": "published",
  "pricing_packages": [
    {
      "title": "Solo ¬∑ 45 min",
      "description": "Vocal performance with backing tracks",
      "price": 900,
      "currency": "AZN",
      "duration_min": 45,
      "is_active": true
    }
  ],
  "repertoire": [
    {
      "title": "Perfect",
      "original_artist": "Ed Sheeran",
      "language": "en",
      "genres": ["pop", "ballad"],
      "duration_sec": 263
    }
  ],
  "media": {
    "photos": ["https://.../cover.jpg"],
    "videos": ["https://youtu.be/..."]
  }
}
```

**–í–∞–∂–Ω–æ**: –¢–æ–ª—å–∫–æ –ø–µ–≤—Ü—ã —Å–æ `status: "published"` –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ.

### –ö–∞—Ç–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –¥–≤–∞ —Ä–µ–∂–∏–º–∞
- **–û–±—ã—á–Ω—ã–π**: –±–µ—Ä—ë–º *–≤—Å–µ* –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ `venues` –∏–ª–∏ `singers` –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.
- **–®–æ—Ä—Ç–ª–∏—Å—Ç**: –±–µ—Ä—ë–º `venue_ids` –∏–ª–∏ `singer_ids` –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —à–æ—Ä—Ç–ª–∏—Å—Ç–æ–≤ –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º *—Ç–æ–ª—å–∫–æ –∏—Ö*; —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —ç—Ç–æ–º—É –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤—É.

---

## 3) –ö–∞—Ç–∞–ª–æ–≥ –ø–µ–≤—Ü–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
–í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ–≤—Ü–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–¥–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ:
- **Top-level –ø–æ–ª—è**: slug, name, aliases, gender, genres, tags, languages, city, regions_covered, phones, contact_public, status
- **pricing_packages**: –º–∞—Å—Å–∏–≤ —Ç–∞—Ä–∏—Ñ–æ–≤ (title, description, price, currency, duration_min, is_active)
- **repertoire**: –º–∞—Å—Å–∏–≤ –ø–µ—Å–µ–Ω (title, original_artist, language, genres, duration_sec)
- **media**: –æ–±—ä–µ–∫—Ç —Å photos[] –∏ videos[]

### –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–µ–≤—Ü–æ–≤
1. **–ü–æ–∏—Å–∫** ‚Äî –ø–æ –∏–º–µ–Ω–∏, –ø—Å–µ–≤–¥–æ–Ω–∏–º–∞–º, —Ç–µ–≥–∞–º
2. **–¶–µ–Ω–∞ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è** (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä) ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω –∏–∑ pricing_packages
3. **–ü–æ–ª** ‚Äî female/male/group/duo
4. **–ñ–∞–Ω—Ä—ã** ‚Äî –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ –±–∞–∑—ã)
5. **–Ø–∑—ã–∫–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è** ‚Äî –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ –±–∞–∑—ã)
6. **–ì–æ—Ä–æ–¥** ‚Äî –±–∞–∑–æ–≤—ã–π –≥–æ—Ä–æ–¥ –ø–µ–≤—Ü–∞

### –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–µ–≤—Ü–∞
- –û–±–ª–æ–∂–∫–∞ (media.photos[0])
- –ò–º—è + –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã
- –ì–æ—Ä–æ–¥ + —Ä–µ–≥–∏–æ–Ω—ã –≤—ã–µ–∑–¥–∞
- –ñ–∞–Ω—Ä—ã + —è–∑—ã–∫–∏
- –¶–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω (min-max –∏–∑ pricing_packages)
- –ö–Ω–æ–ø–∫–∏: **–ú–µ–¥–∏–∞**, **–†–µ–ø–µ—Ä—Ç—É–∞—Ä (N –ø–µ—Å–µ–Ω)**, **–ü–∞–∫–µ—Ç—ã**, **–ö–æ–Ω—Ç–∞–∫—Ç—ã**

### –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
**–†–µ–ø–µ—Ä—Ç—É–∞—Ä:**
- –°–ø–∏—Å–æ–∫ –ø–µ—Å–µ–Ω —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ —è–∑—ã–∫–∞–º
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø–µ—Å–Ω–∏/–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é
- –§–∏–ª—å—Ç—Ä –ø–æ —è–∑—ã–∫—É
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ü–∞–∫–µ—Ç—ã:**
- –°–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–æ–≤ —Å —Ü–µ–Ω–æ–π, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º
- –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (is_active !== false)

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- –¢–µ–ª–µ—Ñ–æ–Ω—ã (—Å clickable —Å—Å—ã–ª–∫–∞–º–∏)
- –°–æ—Ü—Å–µ—Ç–∏ (Instagram, YouTube –∏ –¥—Ä.)

### –†–∞—Å—á—ë—Ç —Ü–µ–Ω—ã
```javascript
// –ë–µ—Ä—ë–º min/max –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
const active = pricing_packages.filter(p => p.is_active !== false);
const prices = active.map(p => p.price);
priceRange = { min: Math.min(...prices), max: Math.max(...prices) };
```

---

## 4) –ú–µ—Ö–∞–Ω–∏–∑–º —à–æ—Ä—Ç–ª–∏—Å—Ç–æ–≤ (–ø–æ–¥—Ä–æ–±–Ω–æ)

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–¥–±–æ—Ä–∫—É –ø–ª–æ—â–∞–¥–æ–∫ –∏–ª–∏ –ø–µ–≤—Ü–æ–≤: —Å—Å—ã–ª–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç `catalog`, `shortlist=<slug>&token=<plain>`, –∞ –≤ –±–∞–∑–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è **—Ç–æ–ª—å–∫–æ —Ö—ç—à** —Ç–æ–∫–µ–Ω–∞. –°—Å—ã–ª–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç –ø–æ `expires_at`.

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

**–®–æ—Ä—Ç–ª–∏—Å—Ç—ã –ø–ª–æ—â–∞–¥–æ–∫** ‚Äî `shortlists/<slug>`:
```json
{
  "venue_ids": ["garden_orangery", "cottage_lake_gala"],
  "token_hash": "<sha256(plain_token)>",
  "note": "–ü–æ–¥–±–æ—Ä –æ—Ç 2025‚Äë10‚Äë09, 12:34",
  "created_at": "<serverTimestamp>",
  "expires_at": "2025-10-16T12:34:00.000Z"
}
```

**–®–æ—Ä—Ç–ª–∏—Å—Ç—ã –ø–µ–≤—Ü–æ–≤** ‚Äî `singer_shortlists/<slug>`:
```json
{
  "singer_ids": ["amelia-stone", "gunel-mamedova"],
  "token_hash": "<sha256(plain_token)>",
  "note": "–ü–µ–≤—Ü—ã –Ω–∞ —Å–≤–∞–¥—å–±—É 15.11",
  "created_at": "<serverTimestamp>",
  "expires_at": "2025-11-22T12:34:00.000Z"
}
```

### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è (UI)
1. –í–∫–ª—é—á–∏—Ç—å **–†–µ–∂–∏–º –ø–æ–¥–±–æ—Ä–∞**, –≤—ã–±—Ä–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ (Set –∏–∑ `id`).
2. –ù–∞–∂–∞—Ç—å ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É¬ª ‚Üí –º–æ–¥–∞–ª–∫–∞ (slug, —Å—Ä–æ–∫, note).
3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `token = Math.random().toString(36).slice(2,10)`.
4. –ü–æ—Å—á–∏—Ç–∞—Ç—å `token_hash = sha256(token)` (Web Crypto API) **–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**.
5. –ó–∞–ø–∏—Å–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é (`shortlists` –∏–ª–∏ `singer_shortlists`):
   ```js
   const config = CATALOG_CONFIG[activeCatalog];
   const idField = activeCatalog === 'singers' ? 'singer_ids' : 'venue_ids';
   
   await setDoc(doc(db, COL[config.shortlistCollection], slug), {
     [idField]: ids,
     token_hash: await sha256Hex(token),
     note,
     created_at: serverTimestamp(),
     expires_at: expiresAt
   });
   ```
6. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å URL `https://<host>/?catalog=<catalog>&shortlist=<slug>&token=<token>` ‚Üí —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ WhatsApp/Telegram, (–æ–ø—Ü.) `navigator.share()`.

**–í–∞–∂–Ω–æ:** –≤ –±–∞–∑–µ –Ω–µ—Ç plain‚Äëtoken. –ü–æ—Ç–µ—Ä—è–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–ª—å–∑—è ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —à–æ—Ä—Ç–ª–∏—Å—Ç.

### –ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫—Ä—ã—Ç–∏—è
1. –°—á–∏—Ç—ã–≤–∞–µ–º `catalog`, `shortlist` –∏ `token` –∏–∑ URL.
2. –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä—è–µ–º:
   - `expires_at` –Ω–µ –∏—Å—Ç—ë–∫;
   - `sha256(token_from_url) === token_hash`.
3. –ü–æ `venue_ids` –∏–ª–∏ `singer_ids` —á–∏—Ç–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (batched), —Ñ–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤.
4. –î–ª—è –ø–µ–≤—Ü–æ–≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º `status === "published"`.
5. –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –∫ —ç—Ç–æ–º—É –º–∞—Å—Å–∏–≤—É; —Ä–µ–Ω–¥–µ—Ä–∏–º. –ï—Å–ª–∏ –µ—Å—Ç—å `note`/`expires_at` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–Ω–Ω–µ—Ä.

### –ü–æ—á–µ–º—É —Ö—ç—à
- URL —Å–æ–¥–µ—Ä–∂–∏—Ç token, –Ω–æ –≤ Firestore —Ö—Ä–∞–Ω–∏—Ç—Å—è **—Ç–æ–ª—å–∫–æ —Ö—ç—à** (SHA‚Äë256). –î–∞–∂–µ –∏–º–µ—è –¥–æ—Å—Ç—É–ø –∫ –ë–î, –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–æ–∫–µ–Ω –Ω–µ–ª—å–∑—è.
- `expires_at` –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç ¬´–≤–µ—á–Ω—ã–µ¬ª —Å—Å—ã–ª–∫–∏.

### –†–∞—Å—à–∏—Ä–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü–∞—Ä–æ–ª—å –≤–º–µ—Å—Ç–æ —Ç–æ–∫–µ–Ω–∞ (—Ö—Ä–∞–Ω–∏—Ç—å Argon2/Bcrypt‚Äë—Ö—ç—à; –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤ UI).
- –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ e‚Äëmail (—Ç—Ä–µ–±—É–µ—Ç Email/Google‚ÄëAuth).
- –ü–æ–¥–ø–∏—Å—å URL (JWS) –∏ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (Cloud Functions).
- –õ–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ (GA4 / BigQuery).

---

## 5) –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### Firestore Rules (–ø—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–≥–∏—Ö –ø—Ä–∞–≤–∏–ª)
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    match /venues/{id} {
      allow read: if true;      // –ø—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞
      allow write: if false;    // –∏–∑–º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Console/Admin
    }
    
    match /singers/{id} {
      allow read: if true;      // –ø—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞
      allow write: if false;    // –∏–∑–º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Console/Admin
    }

    match /shortlists/{slug} {
      allow read: if true;
      allow create, update: if request.auth != null
        && request.resource.data.keys().hasOnly([
             'venue_ids','token_hash','note','created_at','expires_at'
           ])
        && request.resource.data.venue_ids.size() > 0
        && request.resource.data.token_hash is string
        && request.resource.data.expires_at != null;
      allow delete: if false;
    }
    
    match /singer_shortlists/{slug} {
      allow read: if true;
      allow create, update: if request.auth != null
        && request.resource.data.keys().hasOnly([
             'singer_ids','token_hash','note','created_at','expires_at'
           ])
        && request.resource.data.singer_ids.size() > 0
        && request.resource.data.token_hash is string
        && request.resource.data.expires_at != null;
      allow delete: if false;
    }
  }
}
```

### Storage Rules (–ø—Ä–∏–º–µ—Ä)
```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read: if true;   // –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø—É–±–ª–∏—á–Ω—ã
      allow write: if false;
    }
  }
}
```

---

## 6) –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ–¥–∏–∞

### –ü–ª–æ—â–∞–¥–∫–∏ (venues)
1. **Storage** ‚Üí –ø–∞–ø–∫–∞ `/venues/<slug>/...`, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/–≤–∏–¥–µ–æ.
2. –ö–æ–ø–∏—Ä—É–µ–º **Download URL** (—Å `alt=media&token=`).
3. **Firestore ‚Üí venues**: –¥–æ–±–∞–≤–ª—è–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –¥–æ–∫—É–º–µ–Ω—Ç (—Å–º. –º–æ–¥–µ–ª—å).  
   - `media.photos[0]` ‚Äî –æ–±–ª–æ–∂–∫–∞;  
   - `location_url` **–∏–ª–∏** `location_lat/lng` ‚Äî —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∞ –∫–Ω–æ–ø–∫–∞ ¬´–ö–∞—Ä—Ç–∞¬ª.

### –ü–µ–≤—Ü—ã (singers)
1. **Storage** ‚Üí –ø–∞–ø–∫–∞ `/singers/<slug>/...`, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/–≤–∏–¥–µ–æ.
2. –ö–æ–ø–∏—Ä—É–µ–º **Download URL**.
3. **Firestore ‚Üí singers**: –¥–æ–±–∞–≤–ª—è–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –¥–æ–∫—É–º–µ–Ω—Ç.
   - `status: "published"` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
   - `pricing_packages` ‚Äî –º–∞—Å—Å–∏–≤ —Ç–∞—Ä–∏—Ñ–æ–≤ (is_active: true)
   - `repertoire` ‚Äî –º–∞—Å—Å–∏–≤ –ø–µ—Å–µ–Ω
   - `media.photos[0]` ‚Äî –æ–±–ª–æ–∂–∫–∞

---

## 7) –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¥–µ–ø–ª–æ–π

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)
```bash
npm i -g firebase-tools
firebase login
firebase init   # (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) –≤—ã–±—Ä–∞—Ç—å: Hosting, Firestore Rules, Storage Rules
```

### –î–µ–ø–ª–æ–π –ø—Ä–∞–≤–∏–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
firebase deploy --only firestore:rules
firebase deploy --only storage:rules
```

### –î–µ–ø–ª–æ–π —Å–∞–π—Ç–∞
```bash
firebase deploy --only hosting
```
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ—è–≤—è—Ç—Å—è –¥–æ–º–µ–Ω—ã –≤–∏–¥–∞ `https://<project-id>.web.app` –∏ `https://<project-id>.firebaseapp.com`.

### –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions
1. Firebase Console ‚Üí Hosting ‚Üí **Connect to GitHub** ‚Üí –≤—ã–±—Ä–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π/–≤–µ—Ç–∫—É.
2. –†–∞–∑—Ä–µ—à–∏—Ç—å workflow ‚Üí Actions —Å–æ–∑–¥–∞—Å—Ç yaml –∏ –±—É–¥–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π `push`.

---

## 8) UI: —Ñ–∏–ª—å—Ç—Ä—ã, –∫–∞—Ä—Ç–æ—á–∫–∏, –≥–∞–ª–µ—Ä–µ—è

### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–≤
–¢–∞–±—ã –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- **–ü–ª–æ—â–∞–¥–∫–∏** ‚Äî `/?catalog=venues`
- **–ü–µ–≤—Ü—ã** ‚Äî `/?catalog=singers`

–§–∏–ª—å—Ç—Ä—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∫–∞—Ç–∞–ª–æ–≥–∞.

### –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–ª–æ—â–∞–¥–æ–∫
- –ü–æ–∏—Å–∫: —Å—Ç—Ä–æ–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏–π –ø–æ `name`, `city`, `district`, `tags`, `description`.
- –†–∞–π–æ–Ω: —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ `district`.
- –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ **–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è** –∑–∞–ø—Ä–æ—Å–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ `[capMin,capMax]` –∏ `[capacity_min,capacity_max]` –ø–ª–æ—â–∞–¥–∫–∏.
- –¶–µ–Ω–∞/–≥–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ **–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è** `[priceMin,priceMax]` –∏ `[price_min,price_max]` –ø–ª–æ—â–∞–¥–∫–∏.
- –ó–Ω–∞—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ URL (`?q=...&d=...&cap=...&price=...`).

### –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø–µ–≤—Ü–æ–≤
- –ü–æ–∏—Å–∫: –ø–æ `name`, `aliases`, `tags`, `genres`
- **–¶–µ–Ω–∞ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è** (–æ—Å–Ω–æ–≤–Ω–æ–π): –¥–∏–∞–ø–∞–∑–æ–Ω –∏–∑ `pricing_packages`
- –ü–æ–ª: `female`, `male`, `group`, `duo`
- –ñ–∞–Ω—Ä—ã: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∏–∑ –≤—Å–µ—Ö –ø–µ–≤—Ü–æ–≤
- –Ø–∑—ã–∫–∏: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –∏–∑ –≤—Å–µ—Ö –ø–µ–≤—Ü–æ–≤
- –ì–æ—Ä–æ–¥: –±–∞–∑–æ–≤—ã–π –≥–æ—Ä–æ–¥ –ø–µ–≤—Ü–∞
- –ó–Ω–∞—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ URL (`?catalog=singers&q=...&price=...&gender=...`).

### –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–ª–æ—â–∞–¥–∫–∏
- –û–±–ª–æ–∂–∫–∞ (`media.photos[0]`), –Ω–∞–∑–≤–∞–Ω–∏–µ, **—Ä–∞–π–æ–Ω** (–∏–∫–æ–Ω–∫–∞ üìç).
- **–¶–µ–Ω–∞**: ¬´–æ—Ç price_min ‚Äî –¥–æ price_max currency¬ª (–µ—Å–ª–∏ –æ–±–∞ –∑–∞–¥–∞–Ω—ã).
- **–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** (–∏–∫–æ–Ω–∫–∞ üë•): ¬´capacity_min‚Äîcapacity_max¬ª.
- –ö–Ω–æ–ø–∫–∏:
  - **–ú–µ–¥–∏–∞** ‚Äî –º–æ–¥–∞–ª–∫–∞‚Äë–≥–∞–ª–µ—Ä–µ—è.
  - **–ö–∞—Ä—Ç–∞** ‚Äî –æ–±—ã—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞; –ø—Ä–∏ –∫–ª–∏–∫–µ `window.open(mapHref, '_blank', 'noreferrer')`. `mapHref` –±–µ—Ä—ë—Ç—Å—è –∏–∑ `location_url`, –ª–∏–±–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ `location_lat/lng`.

### –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–µ–≤—Ü–∞
- –§–æ—Ç–æ (media.photos[0]), –∏–º—è + –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã
- –ì–æ—Ä–æ–¥ + —Ä–µ–≥–∏–æ–Ω—ã –≤—ã–µ–∑–¥–∞ (–ø–µ—Ä–≤—ã–µ 3)
- –ñ–∞–Ω—Ä—ã (–ø–µ—Ä–≤—ã–µ 3) + —è–∑—ã–∫–∏
- –¶–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω (–∏–∑ pricing_packages)
- –ö–Ω–æ–ø–∫–∏:
  - **–ú–µ–¥–∏–∞** ‚Äî –≥–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ
  - **–†–µ–ø–µ—Ä—Ç—É–∞—Ä (N)** ‚Äî –º–æ–¥–∞–ª–∫–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–µ—Å–µ–Ω
  - **–ü–∞–∫–µ—Ç—ã** ‚Äî –º–æ–¥–∞–ª–∫–∞ —Å —Ç–∞—Ä–∏—Ñ–∞–º–∏
  - **–ö–æ–Ω—Ç–∞–∫—Ç—ã** ‚Äî –º–æ–¥–∞–ª–∫–∞ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏ –∏ —Å–æ—Ü—Å–µ—Ç—è–º–∏

### –ì–∞–ª–µ—Ä–µ—è
- –ú–æ–¥–∞–ª–∫–∞ (overlay): —Å—Ç—Ä–µ–ª–∫–∏/–∫–ª–∞–≤–∏—à–∏/—Å–≤–∞–π–ø—ã, Esc –∑–∞–∫—Ä—ã–≤–∞–µ—Ç, —Å–Ω–∏–∑—É –ª–µ–Ω—Ç–∞ –ø—Ä–µ–≤—å—é.
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–æ–Ω–∏–º–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `media` (–º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ –∏–ª–∏ –æ–±—ä–µ–∫—Ç `photos[]/videos[]`).

---

## 9) –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- –ö–∞—Ç–∞–ª–æ–≥ –ø—É—Å—Ç:
  - –ü—Ä–æ–≤–µ—Ä—å Firestore Rules (—á—Ç–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ), –Ω–∞–ª–∏—á–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ `venues` –∏–ª–∏ `singers`.
  - –î–ª—è –ø–µ–≤—Ü–æ–≤: —É–±–µ–¥–∏—Å—å —á—Ç–æ `status: "published"`.
- –§–æ—Ç–æ –Ω–µ –≤–∏–¥–Ω—ã:
  - Storage Rules –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å Download URL.
- –§–∏–ª—å—Ç—Ä—ã ¬´–Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç¬ª:
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥–ª–∏ ¬´–∑–∞—Å—Ç—Ä—è—Ç—å¬ª –≤ URL. –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç—Ä–æ–∫—É –∏–ª–∏ –Ω–∞–∂–∞—Ç—å ¬´–í—Å–µ —Ä–∞–π–æ–Ω—ã/–æ—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª—è¬ª.
- –®–æ—Ä—Ç–ª–∏—Å—Ç:
  - ¬´–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω¬ª ‚Üí —Å—Ä–∞–≤–Ω–∏—Ç—å `sha256(token)` –∏ `token_hash`, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–Ω—ã–π URL –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `catalog`.
  - ¬´–°—Å—ã–ª–∫–∞ –∏—Å—Ç–µ–∫–ª–∞¬ª ‚Üí `expires_at` –≤ –ø—Ä–æ—à–ª–æ–º –∏–ª–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –Ω–µ–≤–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è.
  - –ü—É—Å—Ç–æ–π —à–æ—Ä—Ç–ª–∏—Å—Ç ‚Üí `venue_ids`/`singer_ids` –ø—É—Å—Ç –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã —É–¥–∞–ª–µ–Ω—ã.
  - –î–ª—è –ø–µ–≤—Ü–æ–≤: –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –æ–Ω–∏ –∏–º–µ—é—Ç `status: "published"`.
- –ö–Ω–æ–ø–∫–∞ ¬´–ö–∞—Ä—Ç–∞¬ª –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç (–ø–ª–æ—â–∞–¥–∫–∏):
  - –ù–µ—Ç `location_url` –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –î–æ–±–∞–≤–∏—Ç—å –æ–¥–Ω–æ –∏–∑ –¥–≤—É—Ö.
- –ú–æ–¥–∞–ª–∫–∏ –ø–µ–≤—Ü–æ–≤ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è:
  - –ü—Ä–æ–≤–µ—Ä—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö: `pricing_packages`, `repertoire`, `media` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∞—Å—Å–∏–≤–∞–º–∏/–æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ.

---

## 10) –ß–µ–∫‚Äë–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

1) –°–æ–∑–¥–∞—Ç—å Firebase –ø—Ä–æ–µ–∫—Ç; –≤–∫–ª—é—á–∏—Ç—å **Auth Anonymous**, **Firestore**, **Storage**, **Hosting**.  
2) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å **Rules** (Firestore/Storage) ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è `singers` –∏ `singer_shortlists`.  
3) –ó–∞–ª–∏—Ç—å –º–µ–¥–∏–∞ –≤ Storage:
   - `/venues/<slug>/...` –¥–ª—è –ø–ª–æ—â–∞–¥–æ–∫
   - `/singers/<slug>/...` –¥–ª—è –ø–µ–≤—Ü–æ–≤
4) –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏:
   - `venues` (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ–ª—è)
   - `singers` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ `status: "published"` + pricing_packages)
5) –í `index.html` –¥–æ–±–∞–≤–∏—Ç—å `window.__FIREBASE_CONFIG__` –∏ `window.__FIREBASE_COLLECTIONS__`.  
6) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ (–∏–ª–∏ `firebase serve`).  
7) `firebase deploy --only hosting`.  
8) (–û–ø—Ü.) –ü–æ–¥–∫–ª—é—á–∏—Ç—å GitHub –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è.  
9) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤ (venues ‚Üî singers)
   - –§–∏–ª—å—Ç—Ä—ã –¥–ª—è –æ–±–æ–∏—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤
   - –ú–µ–¥–∏–∞, –º–æ–¥–∞–ª–∫–∏ (—Ä–µ–ø–µ—Ä—Ç—É–∞—Ä, –ø–∞–∫–µ—Ç—ã, –∫–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–µ–≤—Ü–æ–≤)
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—é/–æ—Ç–∫—Ä—ã—Ç–∏–µ —à–æ—Ä—Ç–ª–∏—Å—Ç–æ–≤ –¥–ª—è –æ–±–æ–∏—Ö –∫–∞—Ç–∞–ª–æ–≥–æ–≤

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A ‚Äî –ø—Ä–∏–º–µ—Ä –∞–¥–º–∏–Ω‚Äë—Å–∫—Ä–∏–ø—Ç–∞ (Node.js, Admin SDK)

### –°–æ–∑–¥–∞–Ω–∏–µ —à–æ—Ä—Ç–ª–∏—Å—Ç–∞ –ø–µ–≤—Ü–æ–≤
```js
// npm i firebase-admin
import admin from "firebase-admin";
import crypto from "crypto";

admin.initializeApp();
const db = admin.firestore();
const sha256 = s => crypto.createHash("sha256").update(s).digest("hex");

async function createSingerShortlist({ slug, singerIds, note, days=7 }) {
  const token = Math.random().toString(36).slice(2,10);
  const expiresAt = new Date(Date.now() + days*24*60*60*1000);

  await db.collection("singer_shortlists").doc(slug).set({
    singer_ids: singerIds,
    token_hash: sha256(token),
    note,
    created_at: admin.firestore.FieldValue.serverTimestamp(),
    expires_at: expiresAt.toISOString()
  });

  return { 
    url: `https://your-domain/?catalog=singers&shortlist=${slug}&token=${token}`, 
    token 
  };
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
const result = await createSingerShortlist({
  slug: 'wedding-singers-nov',
  singerIds: ['amelia-stone', 'gunel-mamedova'],
  note: '–ü–µ–≤—Ü—ã –Ω–∞ —Å–≤–∞–¥—å–±—É 15 –Ω–æ—è–±—Ä—è',
  days: 14
});
console.log('Shortlist URL:', result.url);
```
