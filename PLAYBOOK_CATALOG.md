# PLAYBOOK ‚Äî WA Event AI (–ö–∞—Ç–∞–ª–æ–≥ –ø–ª–æ—â–∞–¥–æ–∫)

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –¥–∞–Ω–Ω—ã–µ, —à–æ—Ä—Ç–ª–∏—Å—Ç—ã, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –¥–µ–ø–ª–æ–π –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞.

---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. –û–±–∑–æ—Ä
2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∞–Ω–Ω—ã–µ
3. –ú–µ—Ö–∞–Ω–∏–∑–º —à–æ—Ä—Ç–ª–∏—Å—Ç–æ–≤ (–ø–æ–¥—Ä–æ–±–Ω–æ)
4. –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Firestore/Storage)
5. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ–¥–∏–∞
6. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¥–µ–ø–ª–æ–π
7. UI: —Ñ–∏–ª—å—Ç—Ä—ã, –∫–∞—Ä—Ç–æ—á–∫–∏, –≥–∞–ª–µ—Ä–µ—è
8. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —á–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
9. –ß–µ–∫‚Äë–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

---

## 1) –û–±–∑–æ—Ä

–í–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∞–π—Ç –Ω–∞ Firebase Hosting) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞—Ç–∞–ª–æ–≥ –ø–ª–æ—â–∞–¥–æ–∫ –∏–∑ Firestore, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä—ã, –º–µ–¥–∏–∞‚Äë–≥–∞–ª–µ—Ä–µ—é –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö **—à–æ—Ä—Ç–ª–∏—Å—Ç–æ–≤** ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø–æ–¥–±–æ—Ä–æ–∫ –ø–ª–æ—â–∞–¥–æ–∫, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ —Å—Å—ã–ª–∫–µ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Å—Ä–æ–∫–æ–º –¥–µ–π—Å—Ç–≤–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç–æ–∫–µ–Ω–∞.

**–°—Ç–µ–∫**: Vanilla JS (ES Modules) ‚Ä¢ Firebase JS SDK v10 ‚Ä¢ Firebase Auth (Anonymous) ‚Ä¢ Firestore ‚Ä¢ Storage ‚Ä¢ Hosting ‚Ä¢ (–æ–ø—Ü.) GitHub Actions.

---

## 2) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∞–Ω–Ω—ã–µ

### –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (index.html)
```html
<script>
  window.__FIREBASE_CONFIG__ = { /* apiKey, authDomain, projectId, storageBucket, ... */ };
  window.__FIREBASE_COLLECTIONS__ = { venues: "venues", shortlists: "shortlists" };
</script>
```

### –ö–æ–ª–ª–µ–∫—Ü–∏—è `venues` (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä)
```json
{
  "name": "Caspian Grand Ballroom",
  "city": "Baku",
  "district": "Narimanov",
  "capacity_min": 150,
  "capacity_max": 900,
  "price_min": 5,
  "price_max": 40,
  "currency": "AZN",
  "location_url": "https://maps.google.com/?q=40.391,49.854",
  "location_lat": 40.391,
  "location_lng": 49.854,
  "media": { "photos": ["https://.../cover.jpg", "https://.../img2.jpg"] },
  "tags": ["banquet","outdoor"]
}
```

–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏: `name`, `city`, `district`, `capacity_min|max`, `price_min|max`, `currency`, `location_url` **–∏–ª–∏** `location_lat/lng`, `media.photos[0]`.

### –ö–∞—Ç–∞–ª–æ–≥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –¥–≤–∞ —Ä–µ–∂–∏–º–∞
- **–û–±—ã—á–Ω—ã–π**: –±–µ—Ä—ë–º *–≤—Å–µ* –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ `venues` –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.
- **–®–æ—Ä—Ç–ª–∏—Å—Ç**: –±–µ—Ä—ë–º `venue_ids` –∏–∑ `shortlists/<slug>` –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º *—Ç–æ–ª—å–∫–æ –∏—Ö*; —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ —ç—Ç–æ–º—É –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤—É.

---

## 3) –ú–µ—Ö–∞–Ω–∏–∑–º —à–æ—Ä—Ç–ª–∏—Å—Ç–æ–≤ (–ø–æ–¥—Ä–æ–±–Ω–æ)

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ–¥–±–æ—Ä–∫—É –ø–ª–æ—â–∞–¥–æ–∫: —Å—Å—ã–ª–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç `shortlist=<slug>&token=<plain>`, –∞ –≤ –±–∞–∑–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è **—Ç–æ–ª—å–∫–æ —Ö—ç—à** —Ç–æ–∫–µ–Ω–∞. –°—Å—ã–ª–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç –ø–æ `expires_at`.

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö `shortlists/<slug>`
```json
{
  "venue_ids": ["garden_orangery", "cottage_lake_gala"],
  "token_hash": "<sha256(plain_token)>",
  "note": "–ü–æ–¥–±–æ—Ä –æ—Ç 2025‚Äë10‚Äë09, 12:34",
  "created_at": "<serverTimestamp>",
  "expires_at": "2025-10-16T12:34:00.000Z"
}
```

### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è (UI)
1. –í–∫–ª—é—á–∏—Ç—å **–†–µ–∂–∏–º –ø–æ–¥–±–æ—Ä–∞**, –≤—ã–±—Ä–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ (Set –∏–∑ `id`).
2. –ù–∞–∂–∞—Ç—å ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É¬ª ‚Üí –º–æ–¥–∞–ª–∫–∞ (slug, —Å—Ä–æ–∫, note).
3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å `token = Math.random().toString(36).slice(2,10)`.
4. –ü–æ—Å—á–∏—Ç–∞—Ç—å `token_hash = sha256(token)` (Web Crypto API) **–Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**.
5. –ó–∞–ø–∏—Å–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç:
   ```js
   await setDoc(doc(db,"shortlists",slug), {
     venue_ids: ids,
     token_hash: await sha256Hex(token),
     note,
     created_at: serverTimestamp(),
     expires_at: expiresAt   // Date –∏–ª–∏ ISO‚Äë—Å—Ç—Ä–æ–∫–∞
   });
   ```
6. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å URL `https://<host>/?shortlist=<slug>&token=<token>` ‚Üí —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ WhatsApp/Telegram, (–æ–ø—Ü.) `navigator.share()`.

**–í–∞–∂–Ω–æ:** –≤ –±–∞–∑–µ –Ω–µ—Ç plain‚Äëtoken. –ü–æ—Ç–µ—Ä—è–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–ª—å–∑—è ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —à–æ—Ä—Ç–ª–∏—Å—Ç.

### –ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫—Ä—ã—Ç–∏—è
1. –°—á–∏—Ç—ã–≤–∞–µ–º `shortlist` –∏ `token` –∏–∑ URL.
2. –ó–∞–≥—Ä—É–∂–∞–µ–º `shortlists/<slug>`, –ø—Ä–æ–≤–µ—Ä—è–µ–º:
   - `expires_at` –Ω–µ –∏—Å—Ç—ë–∫;
   - `sha256(token_from_url) === token_hash`.
3. –ü–æ `venue_ids` —á–∏—Ç–∞–µ–º `venues` (batched), —Ñ–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤.
4. –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–ª—å—Ç—Ä—ã –∫ —ç—Ç–æ–º—É –º–∞—Å—Å–∏–≤—É; —Ä–µ–Ω–¥–µ—Ä–∏–º. –ï—Å–ª–∏ –µ—Å—Ç—å `note`/`expires_at` ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–Ω–Ω–µ—Ä.

### –ü–æ—á–µ–º—É —Ö—ç—à
- URL —Å–æ–¥–µ—Ä–∂–∏—Ç token, –Ω–æ –≤ Firestore —Ö—Ä–∞–Ω–∏—Ç—Å—è **—Ç–æ–ª—å–∫–æ —Ö—ç—à** (SHA‚Äë256). –î–∞–∂–µ –∏–º–µ—è –¥–æ—Å—Ç—É–ø –∫ –ë–î, –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–æ–∫–µ–Ω –Ω–µ–ª—å–∑—è.
- `expires_at` –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç ¬´–≤–µ—á–Ω—ã–µ¬ª —Å—Å—ã–ª–∫–∏.

### –†–∞—Å—à–∏—Ä–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü–∞—Ä–æ–ª—å –≤–º–µ—Å—Ç–æ —Ç–æ–∫–µ–Ω–∞ (—Ö—Ä–∞–Ω–∏—Ç—å Argon2/Bcrypt‚Äë—Ö—ç—à; –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤ UI).
- –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ e‚Äëmail (—Ç—Ä–µ–±—É–µ—Ç Email/Google‚ÄëAuth).
- –ü–æ–¥–ø–∏—Å—å URL (JWS) –∏ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (Cloud Functions).
- –õ–æ–≥–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏ (GA4 / BigQuery).

---

## 4) –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### Firestore Rules (–ø—Ä–∏–º–µ—Ä —Å—Ç—Ä–æ–≥–∏—Ö –ø—Ä–∞–≤–∏–ª)
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    match /venues/{id} {
      allow read: if true;      // –ø—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞
      allow write: if false;    // –∏–∑–º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Console/Admin
    }

    match /shortlists/{slug} {
      allow read: if true;
      allow create, update: if request.auth != null
        && request.resource.data.keys().hasOnly([
             'venue_ids','token_hash','note','created_at','expires_at'
           ])
        && request.resource.data.venue_ids.size() > 0
        && request.resource.data.token_hash is string
        && request.resource.data.expires_at != null;
      allow delete: if false;
    }
  }
}
```

### Storage Rules (–ø—Ä–∏–º–µ—Ä)
```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read: if true;   // –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø—É–±–ª–∏—á–Ω—ã
      allow write: if false;
    }
  }
}
```

---

## 5) –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ–¥–∏–∞

1. **Storage** ‚Üí –ø–∞–ø–∫–∞ `/venues/<slug>/...`, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/–≤–∏–¥–µ–æ.
2. –ö–æ–ø–∏—Ä—É–µ–º **Download URL** (—Å `alt=media&token=`).
3. **Firestore ‚Üí venues**: –¥–æ–±–∞–≤–ª—è–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –¥–æ–∫—É–º–µ–Ω—Ç (—Å–º. –º–æ–¥–µ–ª—å).  
   - `media.photos[0]` ‚Äî –æ–±–ª–æ–∂–∫–∞;  
   - `location_url` **–∏–ª–∏** `location_lat/lng` ‚Äî —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞–ª–∞ –∫–Ω–æ–ø–∫–∞ ¬´–ö–∞—Ä—Ç–∞¬ª.

---

## 6) –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¥–µ–ø–ª–æ–π

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–æ–¥–∏–Ω —Ä–∞–∑)
```bash
npm i -g firebase-tools
firebase login
firebase init   # (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ) –≤—ã–±—Ä–∞—Ç—å: Hosting, Firestore Rules, Storage Rules
```

### –î–µ–ø–ª–æ–π –ø—Ä–∞–≤–∏–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```bash
firebase deploy --only firestore:rules
firebase deploy --only storage:rules
```

### –î–µ–ø–ª–æ–π —Å–∞–π—Ç–∞
```bash
firebase deploy --only hosting
```
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ—è–≤—è—Ç—Å—è –¥–æ–º–µ–Ω—ã –≤–∏–¥–∞ `https://<project-id>.web.app` –∏ `https://<project-id>.firebaseapp.com`.

### –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions
1. Firebase Console ‚Üí Hosting ‚Üí **Connect to GitHub** ‚Üí –≤—ã–±—Ä–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π/–≤–µ—Ç–∫—É.
2. –†–∞–∑—Ä–µ—à–∏—Ç—å workflow ‚Üí Actions —Å–æ–∑–¥–∞—Å—Ç yaml –∏ –±—É–¥–µ—Ç –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ –∫–∞–∂–¥—ã–π `push`.

---

## 7) UI: —Ñ–∏–ª—å—Ç—Ä—ã, –∫–∞—Ä—Ç–æ—á–∫–∏, –≥–∞–ª–µ—Ä–µ—è

### –§–∏–ª—å—Ç—Ä—ã
- –ü–æ–∏—Å–∫: —Å—Ç—Ä–æ–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏–π –ø–æ `name`, `city`, `district`, `tags`, `description`.
- –†–∞–π–æ–Ω: —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ `district`.
- –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ **–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è** –∑–∞–ø—Ä–æ—Å–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ `[capMin,capMax]` –∏ `[capacity_min,capacity_max]` –ø–ª–æ—â–∞–¥–∫–∏.
- –¶–µ–Ω–∞/–≥–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ **–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è** `[priceMin,priceMax]` –∏ `[price_min,price_max]` –ø–ª–æ—â–∞–¥–∫–∏.
- –ó–Ω–∞—á–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ URL (`?q=...&d=...&cap=...&price=...`).

### –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–ª–æ—â–∞–¥–∫–∏
- –û–±–ª–æ–∂–∫–∞ (`media.photos[0]`), –Ω–∞–∑–≤–∞–Ω–∏–µ, **—Ä–∞–π–æ–Ω** (–∏–∫–æ–Ω–∫–∞ üìç).
- **–¶–µ–Ω–∞**: ¬´–æ—Ç price_min ‚Äî –¥–æ price_max currency¬ª (–µ—Å–ª–∏ –æ–±–∞ –∑–∞–¥–∞–Ω—ã).
- **–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** (–∏–∫–æ–Ω–∫–∞ üë•): ¬´capacity_min‚Äîcapacity_max¬ª.
- –ö–Ω–æ–ø–∫–∏:
  - **–ú–µ–¥–∏–∞** ‚Äî –º–æ–¥–∞–ª–∫–∞‚Äë–≥–∞–ª–µ—Ä–µ—è.
  - **–ö–∞—Ä—Ç–∞** ‚Äî –æ–±—ã—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞; –ø—Ä–∏ –∫–ª–∏–∫–µ `window.open(mapHref, '_blank', 'noreferrer')`. `mapHref` –±–µ—Ä—ë—Ç—Å—è –∏–∑ `location_url`, –ª–∏–±–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ `location_lat/lng`.

### –ì–∞–ª–µ—Ä–µ—è
- –ú–æ–¥–∞–ª–∫–∞ (overlay): —Å—Ç—Ä–µ–ª–∫–∏/–∫–ª–∞–≤–∏—à–∏/—Å–≤–∞–π–ø—ã, Esc –∑–∞–∫—Ä—ã–≤–∞–µ—Ç, —Å–Ω–∏–∑—É –ª–µ–Ω—Ç–∞ –ø—Ä–µ–≤—å—é.
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–æ–Ω–∏–º–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `media` (–º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫ –∏–ª–∏ –æ–±—ä–µ–∫—Ç `photos[]/videos[]`).

---

## 8) –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

- –ö–∞—Ç–∞–ª–æ–≥ –ø—É—Å—Ç:
  - –ü—Ä–æ–≤–µ—Ä—å Firestore Rules (—á—Ç–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ), –Ω–∞–ª–∏—á–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ `venues`.
- –§–æ—Ç–æ –Ω–µ –≤–∏–¥–Ω—ã:
  - Storage Rules –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å Download URL.
- –§–∏–ª—å—Ç—Ä—ã ¬´–Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç¬ª:
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–≥–ª–∏ ¬´–∑–∞—Å—Ç—Ä—è—Ç—å¬ª –≤ URL. –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç—Ä–æ–∫—É –∏–ª–∏ –Ω–∞–∂–∞—Ç—å ¬´–í—Å–µ —Ä–∞–π–æ–Ω—ã/–æ—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª—è¬ª.
- –®–æ—Ä—Ç–ª–∏—Å—Ç:
  - ¬´–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω¬ª ‚Üí —Å—Ä–∞–≤–Ω–∏—Ç—å `sha256(token)` –∏ `token_hash`, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–Ω—ã–π URL.
  - ¬´–°—Å—ã–ª–∫–∞ –∏—Å—Ç–µ–∫–ª–∞¬ª ‚Üí `expires_at` –≤ –ø—Ä–æ—à–ª–æ–º –∏–ª–∏ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –Ω–µ–≤–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è.
  - –ü—É—Å—Ç–æ–π —à–æ—Ä—Ç–ª–∏—Å—Ç ‚Üí `venue_ids` –ø—É—Å—Ç –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã —É–¥–∞–ª–µ–Ω—ã.
- –ö–Ω–æ–ø–∫–∞ ¬´–ö–∞—Ä—Ç–∞¬ª –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç:
  - –ù–µ—Ç `location_url` –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç. –î–æ–±–∞–≤–∏—Ç—å –æ–¥–Ω–æ –∏–∑ –¥–≤—É—Ö.

---

## 9) –ß–µ–∫‚Äë–ª–∏—Å—Ç –∑–∞–ø—É—Å–∫–∞

1) –°–æ–∑–¥–∞—Ç—å Firebase –ø—Ä–æ–µ–∫—Ç; –≤–∫–ª—é—á–∏—Ç—å **Auth Anonymous**, **Firestore**, **Storage**, **Hosting**.  
2) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å **Rules** (Firetore/Storage).  
3) –ó–∞–ª–∏—Ç—å –º–µ–¥–∏–∞ –≤ Storage; –ø–æ–ª—É—á–∏—Ç—å Download URLs.  
4) –ó–∞–ø–æ–ª–Ω–∏—Ç—å `venues` (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ–ª—è).  
5) –í `index.html` –¥–æ–±–∞–≤–∏—Ç—å `window.__FIREBASE_CONFIG__` –∏ `window.__FIREBASE_COLLECTIONS__`.  
6) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ (–∏–ª–∏ `firebase serve`).  
7) `firebase deploy --only hosting`.  
8) (–û–ø—Ü.) –ü–æ–¥–∫–ª—é—á–∏—Ç—å GitHub –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è.  
9) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: —Ñ–∏–ª—å—Ç—Ä—ã, –º–µ–¥–∏–∞, ¬´–ö–∞—Ä—Ç–∞¬ª, –≥–µ–Ω–µ—Ä–∞—Ü–∏—é/–æ—Ç–∫—Ä—ã—Ç–∏–µ —à–æ—Ä—Ç–ª–∏—Å—Ç–æ–≤.

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A ‚Äî –ø—Ä–∏–º–µ—Ä –∞–¥–º–∏–Ω‚Äë—Å–∫—Ä–∏–ø—Ç–∞ (Node.js, Admin SDK)

```js
// npm i firebase-admin
import admin from "firebase-admin";
import crypto from "crypto";

admin.initializeApp();
const db = admin.firestore();
const sha256 = s => crypto.createHash("sha256").update(s).digest("hex");

async function createShortlist({ slug, venueIds, note, days=7 }) {
  const token = Math.random().toString(36).slice(2,10);
  const expiresAt = new Date(Date.now() + days*24*60*60*1000);

  await db.collection("shortlists").doc(slug).set({
    venue_ids: venueIds,
    token_hash: sha256(token),
    note,
    created_at: admin.firestore.FieldValue.serverTimestamp(),
    expires_at: expiresAt.toISOString()
  });

  return { url: `https://your-domain/?shortlist=${slug}&token=${token}`, token };
}
```
